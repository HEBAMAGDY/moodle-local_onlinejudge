<XMLDB PATH="mod/assignment/type/onlinejudge/db" VERSION="20090202" COMMENT="XMLDB file for Moodle mod/assignment/type/onlinejudge" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../../../lib/xmldb/xmldb.xsd">
    <TABLES>
        <TABLE NAME="assignment_oj" COMMENT="Stores assignment programming language" NEXT="assignment_oj_results">
            <FIELDS>
                <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="assignment"/>
                <FIELD NAME="assignment" TYPE="int" LENGTH="10" NOTNULL="false" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="language"/>
                <FIELD NAME="language" TYPE="char" LENGTH="50" NOTNULL="true" SEQUENCE="false" ENUM="false" COMMENT="Assignment programming language" PREVIOUS="assignment"/>
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="assignment"/>
                <KEY NAME="assignment" TYPE="foreign" FIELDS="assignment" REFTABLE="assignment" REFFIELDS="id" COMMENT="assignment foreign key" PREVIOUS="primary"/>
            </KEYS>
        </TABLE>
        <TABLE NAME="assignment_oj_results" COMMENT="Submission test results" PREVIOUS="assignment_oj" NEXT="assignment_oj_submissions">
            <FIELDS>
                <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="submission"/>
                <FIELD NAME="submission" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="test"/>
                <FIELD NAME="test" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="submission" NEXT="runtime"/>
                <FIELD NAME="runtime" TYPE="number" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" DECIMALS="3" COMMENT="Program run time" PREVIOUS="test" NEXT="status"/>
                <FIELD NAME="status" TYPE="char" LENGTH="10" NOTNULL="true" DEFAULT="pending" SEQUENCE="false" ENUM="true" ENUMVALUES="'pending', 'ok', 'wa', 'pe', 're', 'tle', 'mle'" COMMENT="Possible values: 'Accepted', 'Wrong answer', 'Internal error'" PREVIOUS="runtime" NEXT="output"/>
                <FIELD NAME="output" TYPE="text" LENGTH="medium" NOTNULL="false" SEQUENCE="false" ENUM="false" COMMENT="Compiler/program output" PREVIOUS="status" NEXT="error"/>
                <FIELD NAME="error" TYPE="text" LENGTH="medium" NOTNULL="false" SEQUENCE="false" ENUM="false" COMMENT="Program runtime/compiler error" PREVIOUS="output" NEXT="judgetime"/>
                <FIELD NAME="judgetime" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" COMMENT="The time when judgment finished" PREVIOUS="error"/>
            </FIELDS>
           <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="submission"/>
                <KEY NAME="submission" TYPE="foreign" FIELDS="submission" REFTABLE="assignment_submissions" REFFIELDS="id" COMMENT="assignment_submissions foreign key" PREVIOUS="primary" NEXT="test"/>
                <KEY NAME="test" TYPE="foreign" FIELDS="test" REFTABLE="assignment_oj_tests" REFFIELDS="id" COMMENT="assignment_oj_tests foreign key" PREVIOUS="submission"/>
            </KEYS>
        </TABLE>
        <TABLE NAME="assignment_oj_submissions" COMMENT="Info about submitted assignments" PREVIOUS="assignment_oj_results" NEXT="assignment_oj_tests">
            <FIELDS>
                <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="submission"/>
                <FIELD NAME="submission" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="judgeinfo"/>
                <FIELD NAME="judgeinfo" TYPE="text" LENGTH="medium" NOTNULL="false" SEQUENCE="false" ENUM="false" COMMENT="Info from judger" PREVIOUS="submission" NEXT="judged"/>
                <FIELD NAME="judged" TYPE="int" LENGTH="4" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" COMMENT="Whether the submission has been judged" PREVIOUS="judgeinfo"/>
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="submission"/>
                <KEY NAME="submission" TYPE="foreign-unique" FIELDS="submission" REFTABLE="assignment_submissions" REFFIELDS="id" COMMENT="assignment_submissions foreign key" PREVIOUS="primary"/>
            </KEYS>
        </TABLE>
        <TABLE NAME="assignment_oj_tests" COMMENT="Info about assignment tests" PREVIOUS="assignment_oj_submissions">
            <FIELDS>
                <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="assignment"/>
                <FIELD NAME="assignment" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="input"/>
                <FIELD NAME="input" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" COMMENT="Program input" PREVIOUS="assignment" NEXT="output"/>
                <FIELD NAME="output" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" COMMENT="Expected program output" PREVIOUS="input"/>
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" NEXT="assignment"/>
                <KEY NAME="assignment" TYPE="foreign" FIELDS="assignment" REFTABLE="assignment" REFFIELDS="id" COMMENT="assignment foreign key" PREVIOUS="primary"/>
            </KEYS>
        </TABLE>
    </TABLES>
</XMLDB>
